version: '3.6'
services:
    nginx:
      container_name: nginx
      image: nginx:latest
      ports:
        - target: 80
          published: 80
          protocol: tcp
      volumes:
        - type: bind
          source: ./nginx/nginx.conf
          target: /etc/nginx/nginx.conf
      depends_on:
        - Service1
        - crystals
        - cards
        - readings
    Service1:
       image: spoject2jenkins:5000/Service1:build-${BUILD_NUMBER}
       build:
         context: ./Service1
       ports:
         - target: 5000
           published: 5000
           protocol: tcp
           
    crystals:
       image: poject2jenkins:5000/crystal:build-${BUILD_NUMBER}
       build: 
         context: ./crystals
         dockerfile: Dockerfile
    cards:
       image: poject2jenkins:5000/cards:build-${BUILD_NUMBER}
       build: 
         context: ./cards
         dockerfile: Dockerfile
    readings:
       image: poject2jenkins:5000/readings:build-${BUILD_NUMBER}
       build: 
         context: ./readings
         dockerfile: Dockerfile

